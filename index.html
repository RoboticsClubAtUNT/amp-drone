<!doctype html>
<html>
  <head>
    <title>Accelerometer Test</title>
    <script type="text/javascript" src= "/socket.io/socket.io.js"></script>
    <script type="text/javascript" src="/static/jquery/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="/static/bootstrap/js/bootstrap.js"></script>
    <script type="text/javascript" src="/static/bootstrap/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/static/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="/static/bootstrap/css/bootstrap-social.css">
    <link rel="stylesheet" type="text/css" href="/static/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/static/font-awesome/css/font-awesome.css">
    <link rel="stylesheet" type="text/css" href="/static/theme.css">
  </head>
  <body>
    <script type="text/javascript">

        var socket = io.connect('http://raspberrypi:3030');  // change to the server IP address

        function orientation(event)
        {
          //Alpha This is a compass 0 = North || 0 - 360
          //socket.emit('alpha', {'alpha': event.alpha});
          console.log("Magnetometer: "
            + event.alpha + ", "
            + event.beta + ", "
            + event.gamma
          );

          //gamma tilt left right Max +-90
          //beta forward / backward tilt +-180
          var magnetometer = [event.beta, event.gamma];
          socket.emit('mag', {'Results': magnetometer});
          // socket.emit('meter_2', {'gamma': event.gamma});
        }

        function getAccel()
        {
            if(window.DeviceOrientationEvent)
           	{
                window.addEventListener("deviceorientation", orientation, false);
            }
           	else
           	{
                socket.emit('notSupported');
                console.log("DeviceOrientationEvent is not supported");
            }
           //console.log('emittedKey ', {'letter': String.fromCharCode(e.charCode)});
           //socket.emit('client_data', {'letter': String.fromCharCode(e.charCode)});
        }

        function autoDrive()
        {
          socket.emit('autoDrive');
        }

        function newPic()
        {
          socket.emit('pic');
          var newImage = new Image();
          newImage.src = "/static/robot.jpgt=" + new Date().getTime();
          document.getElementById("picRobot").src = newImage.src;
        }

    </script>
    <div class="container">
        <div class="row">
            <div class="col-sm-8">
                <img src="/static/robot.jpg" height="480" width="640" alt="No image found">
                <div class="btn-group">
                    <button id="accel" type="button" class="btn btn-default" onclick="getAccel()">Accelerometer</button>
                    <button id="auto" type="button" class="btn btn-default" onclick="autoDrive()">Auto Drive</button>
                    <button id="picRobot" type="button" class="btn btn-default" onclick="newPic()">Get Picture</button>
                </div>
            </div>
        </div>
    </div>

  </body>
</html>
